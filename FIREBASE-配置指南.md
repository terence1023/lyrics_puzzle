# ğŸ”¥ Firebase å®æ—¶é…ç½®æŒ‡å—

## ğŸ“‹ é…ç½®æ­¥éª¤æ¦‚è§ˆ

1. âœ… åˆ›å»º Firebase é¡¹ç›®
2. âœ… å¯ç”¨ Realtime Database
3. âœ… é…ç½®å®‰å…¨è§„åˆ™
4. âœ… è·å–é…ç½®ä¿¡æ¯
5. âœ… æ›´æ–°ä»£ç 
6. âœ… æµ‹è¯•å’Œéƒ¨ç½²

---

## ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Firebase é¡¹ç›®

### 1.1 è®¿é—® Firebase Console

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š**https://console.firebase.google.com/**

### 1.2 åˆ›å»ºæ–°é¡¹ç›®

1. ç‚¹å‡» **"æ·»åŠ é¡¹ç›®"** æˆ– **"Create a project"**
2. è¾“å…¥é¡¹ç›®åç§°ï¼š`lyrics-puzzle`ï¼ˆæˆ–ä½ å–œæ¬¢çš„åç§°ï¼‰
3. Google Analyticsï¼šé€‰æ‹© **å…³é—­**ï¼ˆä¸éœ€è¦ï¼‰
4. ç‚¹å‡» **"åˆ›å»ºé¡¹ç›®"**
5. ç­‰å¾…é¡¹ç›®åˆ›å»ºå®Œæˆï¼ˆçº¦30-60ç§’ï¼‰
6. ç‚¹å‡» **"ç»§ç»­"**

---

## ç¬¬äºŒæ­¥ï¼šå¯ç”¨ Realtime Database

### 2.1 è¿›å…¥ Realtime Database

1. åœ¨å·¦ä¾§èœå•ä¸­æ‰¾åˆ° **"æ„å»º"** æˆ– **"Build"**
2. ç‚¹å‡» **"Realtime Database"**
3. ç‚¹å‡» **"åˆ›å»ºæ•°æ®åº“"** æˆ– **"Create Database"**

### 2.2 é€‰æ‹©ä½ç½®

é€‰æ‹©æ•°æ®åº“ä½ç½®ï¼š
- **æ¨èï¼š** `asia-southeast1` (æ–°åŠ å¡) - äºšæ´²ç”¨æˆ·é€Ÿåº¦æœ€å¿«
- æˆ–è€…ï¼š`us-central1` (ç¾å›½ä¸­éƒ¨) - å…¨çƒå¹³è¡¡

### 2.3 è®¾ç½®å®‰å…¨è§„åˆ™

é€‰æ‹© **"æµ‹è¯•æ¨¡å¼"** (Test mode)
- è¿™ä¼šå…è®¸æ‰€æœ‰äººè¯»å†™æ•°æ®ï¼ˆ30å¤©åè‡ªåŠ¨å¤±æ•ˆï¼‰
- æˆ‘ä»¬ç¨åä¼šè®¾ç½®æ›´å®‰å…¨çš„è§„åˆ™

ç‚¹å‡» **"å¯ç”¨"**

---

## ç¬¬ä¸‰æ­¥ï¼šé…ç½®å®‰å…¨è§„åˆ™

### 3.1 æ‰“å¼€è§„åˆ™ç¼–è¾‘å™¨

åœ¨ Realtime Database é¡µé¢ï¼Œç‚¹å‡» **"è§„åˆ™"** æ ‡ç­¾

### 3.2 è®¾ç½®è§„åˆ™

å°†è§„åˆ™æ›¿æ¢ä¸ºï¼š

```json
{
  "rules": {
    "dailyStats": {
      ".read": true,
      "$date": {
        ".write": "!data.exists() || newData.val() >= data.val()",
        ".validate": "newData.isNumber() && newData.val() >= 0"
      }
    }
  }
}
```

**è§„åˆ™è¯´æ˜ï¼š**
- âœ… æ‰€æœ‰äººå¯ä»¥è¯»å–æ•°æ®
- âœ… åªèƒ½å¢åŠ æ•°å­—ï¼Œä¸èƒ½å‡å°‘ï¼ˆé˜²æ­¢æ¶æ„ç¯¡æ”¹ï¼‰
- âœ… åªæ¥å—æ•°å­—ç±»å‹
- âœ… æ•°å­—å¿…é¡»å¤§äºç­‰äº0

ç‚¹å‡» **"å‘å¸ƒ"**

---

## ç¬¬å››æ­¥ï¼šè·å–é…ç½®ä¿¡æ¯

### 4.1 è¿›å…¥é¡¹ç›®è®¾ç½®

1. ç‚¹å‡»å·¦ä¸Šè§’çš„ **é½¿è½®å›¾æ ‡** âš™ï¸
2. é€‰æ‹© **"é¡¹ç›®è®¾ç½®"** æˆ– **"Project settings"**

### 4.2 æ·»åŠ  Web åº”ç”¨

1. æ»šåŠ¨åˆ° **"æ‚¨çš„åº”ç”¨"** éƒ¨åˆ†
2. ç‚¹å‡» **Web å›¾æ ‡** `</>`
3. è¾“å…¥åº”ç”¨æ˜µç§°ï¼š`lyrics-puzzle-web`
4. **ä¸è¦å‹¾é€‰** "Firebase Hosting"
5. ç‚¹å‡» **"æ³¨å†Œåº”ç”¨"**

### 4.3 å¤åˆ¶é…ç½®ä»£ç 

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š

```javascript
const firebaseConfig = {
  apiKey: "AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
  authDomain: "lyrics-puzzle-xxxxx.firebaseapp.com",
  databaseURL: "https://lyrics-puzzle-xxxxx-default-rtdb.firebaseio.com",
  projectId: "lyrics-puzzle-xxxxx",
  storageBucket: "lyrics-puzzle-xxxxx.appspot.com",
  messagingSenderId: "123456789012",
  appId: "1:123456789012:web:xxxxxxxxxxxxxx"
};
```

**é‡è¦ï¼š** å¤åˆ¶è¿™æ®µé…ç½®ï¼Œæˆ‘ä»¬é©¬ä¸Šè¦ç”¨åˆ°ï¼

---

## ç¬¬äº”æ­¥ï¼šæ›´æ–°ä»£ç 

### 5.1 æ‰“å¼€ firebase-stats.js

æ‰¾åˆ°æ–‡ä»¶ä¸­çš„é…ç½®éƒ¨åˆ†ï¼š

```javascript
this.config = {
    apiKey: "YOUR_API_KEY_HERE",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
};
```

### 5.2 æ›¿æ¢é…ç½®

å°†ä¸Šé¢çš„é…ç½®æ›¿æ¢ä¸ºä½ ä» Firebase å¤åˆ¶çš„é…ç½®ã€‚

**ç¤ºä¾‹ï¼š**

```javascript
this.config = {
    apiKey: "AIzaSyAbc123...",  // ä½ çš„çœŸå® API Key
    authDomain: "lyrics-puzzle-12345.firebaseapp.com",
    databaseURL: "https://lyrics-puzzle-12345-default-rtdb.firebaseio.com",
    projectId: "lyrics-puzzle-12345",
    storageBucket: "lyrics-puzzle-12345.appspot.com",
    messagingSenderId: "987654321098",
    appId: "1:987654321098:web:abcdefghijk"
};
```

### 5.3 æ›´æ–° index.html

åœ¨ `index.html` çš„ `</body>` æ ‡ç­¾ä¹‹å‰ï¼Œæ·»åŠ ï¼š

```html
<script src="firebase-stats.js"></script>
```

**å®Œæ•´ç¤ºä¾‹ï¼š**

```html
    <!-- å…¶ä»–å†…å®¹... -->
    
    <script src="firebase-stats.js"></script>
    <script src="script.js"></script>
</body>
</html>
```

---

## ç¬¬å…­æ­¥ï¼šæµ‹è¯•

### 6.1 æœ¬åœ°æµ‹è¯•

1. æ‰“å¼€æµè§ˆå™¨
2. è®¿é—® `index.html`
3. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰

**é¢„æœŸçœ‹åˆ°ï¼š**
```
ğŸš€ åˆå§‹åŒ– Firebase å…¨å±€ç»Ÿè®¡ç³»ç»Ÿ...
âœ… Firebase åˆå§‹åŒ–æˆåŠŸ
ğŸ“Š ä»Šæ—¥å…¨çƒé€šè¿‡äººæ•°: 0
âœ… å…¨å±€ç»Ÿè®¡ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ
   æ¨¡å¼: â˜ï¸ Firebaseäº‘ç«¯
```

### 6.2 æµ‹è¯•é€šå…³

1. ç©æ¸¸æˆå¹¶é€šå…³
2. æŸ¥çœ‹å³ä¸Šè§’æ•°å­—æ˜¯å¦å¢åŠ 
3. åœ¨ Firebase Console æŸ¥çœ‹æ•°æ®

**åœ¨ Firebase Console éªŒè¯ï¼š**
- æ‰“å¼€ Realtime Database
- æŸ¥çœ‹ `dailyStats/2025-10-16`
- åº”è¯¥çœ‹åˆ°æ•°å­—å¢åŠ äº†

### 6.3 å¤šè®¾å¤‡æµ‹è¯•

1. åœ¨å¦ä¸€ä¸ªæµè§ˆå™¨æˆ–è®¾å¤‡æ‰“å¼€é¡µé¢
2. åº”è¯¥çœ‹åˆ°ç›¸åŒçš„é€šè¿‡äººæ•°
3. åœ¨ä¸€ä¸ªè®¾å¤‡é€šå…³åï¼Œå¦ä¸€ä¸ªè®¾å¤‡åˆ·æ–°åº”è¯¥çœ‹åˆ°æ›´æ–°

---

## ç¬¬ä¸ƒæ­¥ï¼šéƒ¨ç½²åˆ° GitHub Pages

### 7.1 æäº¤ä»£ç 

```bash
git add firebase-stats.js index.html
git commit -m "æ·»åŠ Firebaseå…¨å±€ç»Ÿè®¡åŠŸèƒ½"
git push origin main
```

### 7.2 éªŒè¯éƒ¨ç½²

1. ç­‰å¾… GitHub Pages æ„å»ºï¼ˆ1-2åˆ†é’Ÿï¼‰
2. è®¿é—®ä½ çš„ GitHub Pages ç½‘ç«™
3. æ£€æŸ¥åŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ˜¾ç¤º "æ¨¡æ‹Ÿæ•°æ®"

**åŸå› ï¼š** Firebase é…ç½®æœªæ­£ç¡®å¡«å†™

**è§£å†³ï¼š**
1. æ£€æŸ¥ `firebase-stats.js` ä¸­çš„é…ç½®
2. ç¡®ä¿æ²¡æœ‰ `"YOUR_API_KEY_HERE"` è¿™æ ·çš„å ä½ç¬¦
3. ç¡®ä¿æ‰€æœ‰å­—æ®µéƒ½å·²å¡«å†™

### é—®é¢˜ 2: æ§åˆ¶å°é”™è¯¯ "Firebase: Error (auth/...)"

**åŸå› ï¼š** å®‰å…¨è§„åˆ™é…ç½®é”™è¯¯

**è§£å†³ï¼š**
1. æ£€æŸ¥ Firebase Console çš„è§„åˆ™è®¾ç½®
2. ç¡®ä¿è§„åˆ™å…è®¸è¯»å†™

### é—®é¢˜ 3: æ•°å­—ä¸æ›´æ–°

**åŸå› ï¼š** ç½‘ç»œé—®é¢˜æˆ–å·²è®°å½•

**è§£å†³ï¼š**
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ¸…é™¤æµè§ˆå™¨ LocalStorage
3. åˆ·æ–°é¡µé¢é‡è¯•

### é—®é¢˜ 4: CORS é”™è¯¯

**åŸå› ï¼š** åŸŸåæœªæˆæƒ

**è§£å†³ï¼š**
1. åœ¨ Firebase Console > Authentication
2. æ·»åŠ ä½ çš„åŸŸååˆ°æˆæƒåŸŸååˆ—è¡¨

---

## ğŸ“Š æŸ¥çœ‹ç»Ÿè®¡æ•°æ®

### åœ¨ Firebase Console æŸ¥çœ‹

1. æ‰“å¼€ Realtime Database
2. å±•å¼€ `dailyStats`
3. çœ‹åˆ°æ¯æ—¥çš„é€šè¿‡äººæ•°

**æ•°æ®æ ¼å¼ï¼š**
```
dailyStats/
  â”œâ”€â”€ 2025-10-16: 23
  â”œâ”€â”€ 2025-10-17: 45
  â””â”€â”€ 2025-10-18: 12
```

### å¯¼å‡ºæ•°æ®

1. åœ¨ Realtime Database é¡µé¢
2. ç‚¹å‡» "å¯¼å‡º JSON"
3. ä¿å­˜æ•°æ®å¤‡ä»½

---

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

### 1. é™åˆ¶å†™å…¥é¢‘ç‡

åœ¨è§„åˆ™ä¸­æ·»åŠ ï¼š

```json
{
  "rules": {
    "dailyStats": {
      ".read": true,
      "$date": {
        ".write": "!data.exists() || (newData.val() <= data.val() + 100 && newData.val() >= data.val())"
      }
    }
  }
}
```

### 2. ç›‘æ§ä½¿ç”¨é‡

- å®šæœŸæ£€æŸ¥ Firebase Console çš„ä½¿ç”¨ç»Ÿè®¡
- å…è´¹é¢åº¦ï¼šæ¯æœˆ 1GB ä¸‹è½½ï¼Œ100,000 å¹¶å‘è¿æ¥

### 3. è®¾ç½®é¢„ç®—æé†’

- Firebase Console > ä½¿ç”¨æƒ…å†µå’Œç»“ç®—
- è®¾ç½®é¢„ç®—æé†’ï¼ˆæ¨èï¼š$5ï¼‰

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### å…è´¹é¢åº¦ï¼ˆSpark è®¡åˆ’ï¼‰

- âœ… 1 GB å­˜å‚¨
- âœ… 10 GB/æœˆ ä¸‹è½½
- âœ… 100,000 å¹¶å‘è¿æ¥
- âœ… å®Œå…¨å…è´¹ï¼Œæ— éœ€ä¿¡ç”¨å¡

### é¢„è®¡ä½¿ç”¨é‡

å¯¹äºæ­Œè¯æ¸¸æˆé¡¹ç›®ï¼š
- æ¯æ¬¡é€šå…³ï¼šçº¦ 100 å­—èŠ‚
- æ¯å¤© 1000 æ¬¡é€šå…³ï¼šçº¦ 0.1 MB
- **ç»“è®ºï¼š** å…è´¹é¢åº¦å®Œå…¨å¤Ÿç”¨ï¼

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] Firebase é¡¹ç›®å·²åˆ›å»º
- [ ] Realtime Database å·²å¯ç”¨
- [ ] å®‰å…¨è§„åˆ™å·²è®¾ç½®
- [ ] é…ç½®å·²å¤åˆ¶å¹¶æ›´æ–°åˆ°ä»£ç 
- [ ] `firebase-stats.js` å·²å¼•å…¥åˆ° `index.html`
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] Firebase Console å¯ä»¥çœ‹åˆ°æ•°æ®
- [ ] ä»£ç å·²æäº¤åˆ° GitHub
- [ ] GitHub Pages éƒ¨ç½²æˆåŠŸ

---

## ğŸ‰ å®Œæˆï¼

æ­å–œï¼ä½ å·²ç»æˆåŠŸé…ç½®äº† Firebase å…¨å±€ç»Ÿè®¡åŠŸèƒ½ã€‚

ç°åœ¨æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½çœ‹åˆ°ç›¸åŒçš„å®æ—¶é€šè¿‡äººæ•°äº†ï¼ğŸ†

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹ Firebase æ–‡æ¡£ï¼šhttps://firebase.google.com/docs/database
